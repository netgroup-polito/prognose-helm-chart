apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-fe-config
  labels:
    {{- include "prognose.labels" (dict "context" . "component" "frontend") | nindent 4 }}
data:
  {{- if .Values.fe.config.apiUrl }}
  REACT_APP_API_URL: {{ .Values.fe.config.apiUrl | quote }}
  {{- else }}
  # CORRETTO: Usiamo http e la porta 30438 per le chiamate API
  REACT_APP_API_URL: "http://{{ .Values.be.ingress.host }}:30438{{ .Values.be.ingress.path }}"
  {{- end }}
  REACT_APP_KEYCLOAK_URL: {{ .Values.be.config.keycloakAuthServerUrl | quote }}
  REACT_APP_KEYCLOAK_REALM: {{ .Values.be.config.keycloakRealm | quote }}
  REACT_APP_KEYCLOAK_CLIENT_ID: {{ .Values.fe.config.keycloakClientId | quote }}
  NODE_ENV: "production"
